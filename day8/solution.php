<?php

$data = file_get_contents("input.txt", TRUE);
$rows = explode(PHP_EOL, $data);

$display = [
    1 => ['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'],
    2 => ['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'],
    3 => ['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'],
    4 => ['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'],
    5 => ['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'],
];

$i = 0;
foreach($rows as $row){
    modifyDisplay($row, $display);
}

function modifyDisplay($instruction, &$display){

    preg_match('/^(\w+) (?:(\d+)x(\d+)|(row|column))(?: (y|x)=(\d+) by (\d+))?/', $instruction, $instructions);
    if($instructions[1] == 'rect') {
        for($i = 0; $i < $instructions[2]; $i++){
            for($j = 0; $j < $instructions[3]; $j++){
                $display[$j][$i] = '#';
            }
        }
    } else {
        if($instructions[4] == 'row'){
            $newLine = array_fill(0, 50, '.');
            foreach($display[$instructions[6]] as $key => $pixel){
                if($key + $instructions[7] > 49){
                    $newLine[abs($key + $instructions[7] - 50)] = $pixel;
                } else {
                    $newLine[$key + $instructions[7]] = $pixel;
                }
            }
            $display[$instructions[6]] = $newLine;
        } else {

        }
    }
}


drawDisplay($display);


function drawDisplay($display){
    foreach($display as $row){
        echo implode($row) . "\n";
    }
}